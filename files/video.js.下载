var videoplay=window.videoplay=new (function(){var T="0.9.5.3",n=false,Y=false,b={element:document.createElement("span")};function B(Z){if(!document.getElementById){return null}Z=(typeof Z=="string")?document.getElementById(Z):Z;return Z}function R(ac,ae){var ad=[];ac=B(ac);if(ac&&ac.getElementsByTagName){var aa=ac.getElementsByTagName("*");for(var ab=0;ab<aa.length;ab++){var Z=aa[ab].getAttribute("id");if(Z&&Z.match(ae)){ad.push(aa[ab])}}}return ad}function f(Z){return !isNaN(parseInt(Z))}function k(ab,aa){if(aa&&typeof aa==="object"){for(var Z in aa){ab[Z]=aa[Z]}}return ab}var g={display:"block",extend:"vf",marker:"marker",playlist:"videolist",target:"videoarea",videofile:"videofile",borderColor:"#c8c8c8",scaleMode:3,autoplay:true,autohide:true,loop:false,innerBar:false,onFinish:function(){},onChange:function(){},preload:null,player:"http://www.china.com.cn/player/player.swf?version="+T},F,M,x,E,u,q,a,c,D=0,w=false,s=[],V=[];var C="undefined",p="object",Q="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",o="application/x-shockwave-flash",N="application/x-mplayer2",r="MediaPlayer.MediaPlayer.1",e="WMPlayer.OCX.7";win=window,doc=document,nav=navigator,plugin=false,html5video=!!document.createElement("video").canPlayType,ciic_ua=function(){var am=typeof doc.getElementById!=C&&typeof doc.getElementsByTagName!=C&&typeof doc.createElement!=C,ai=nav.userAgent.toLowerCase(),al=nav.platform.toLowerCase(),ar=al?/win/.test(al):/win/.test(ai),ac=al?/mac/.test(al):/mac/.test(ai),aj=!+"\v1",ag=/safari/.test(ai),ao=/opera/.test(ai),ab=/iphone os/.test(ai),au=/android/.test(ai),ad=/iphone os 4_/.test(ai),ak=/ipad/.test(ai),ah=ak||ad,ae=/firefox/.test(ai),aq=null,Z={installed:false,scriptable:false,type:null,versionInfo:null};if(typeof nav.plugins!=C&&typeof nav.plugins[Q]==p){aq=nav.plugins[Q].description;if(aq&&!(typeof nav.mimeTypes!=C&&nav.mimeTypes[o]&&!nav.mimeTypes[o].enabledPlugin)){Z.installed=true;Z.type="NetscapePlugin";aj=false;Z.versionInfo=aq.replace(/^.*\s+(\S+\s+\S+$)/,"$1")}}else{if(typeof win.ActiveXObject!=C){try{var at=new ActiveXObject(W);if(at){Z.type="ActiveX";Z.installed=true;aq=at.GetVariable("$version");if(aq){aj=true;Z.versionInfo=aq}}}catch(ap){}try{var at=new ActiveXObject(W);if(at){aq=at.GetVariable("$version");if(aq){aj=true;aq=aq.split(" ")[1].split(",");playerVersion=[parseInt(aq[0],10),parseInt(aq[1],10),parseInt(aq[2],10)]}}}catch(ap){}}}var aa=function(ax){var aw=null;try{if(window.ActiveXObject){aw=new ActiveXObject(ax)}else{if(window.GeckoActiveXObject){aw=new GeckoActiveXObject(ax)}}}catch(av){}return aw};var af={installed:false,scriptable:false,type:null,versionInfo:null};if((window.ActiveXObject&&win)||window.GeckoActiveXObject){af.type="ActiveX";var an=aa(e);if(an){af.installed=true;af.scriptable=true;af.versionInfo=an.versionInfo}else{an=aa(r);if(an){af.installed=true;af.scriptable=true;af.versionInfo="6.4"}else{af.versionInfo="none"}}}else{if(nav.mimeTypes&&nav.mimeTypes[N]){af.type="NetscapePlugin";var an=nav.mimeTypes[N].enabledPlugin;if(an){af.installed=true;af.versionInfo="PluginVersion"}}}return{w3:am,flash:Z,wmp:af,ie:aj,win:ar,mac:ac,opera:ao,safari:ag,android:au,ipad:ah,FF:ae}}(),expressInstall=function(Z){var aa;if(!Z){Z=M}switch(Z){case"wmv":aa='如果您未看到影片，<a href="http://www.microsoft.com/windows/windowsmedia/cn/player/download/download.aspx">请安装windows media播放器</a><br>使用FireFox请尝试<a href="http://port25.technet.com/pages/windows-media-player-firefox-plugin-download.aspx">安装插件</a>';break;case"mp4":case"flash":aa='如果您未看到影片，<a href="http://www.adobe.com/cn/products/flashplayer/">请安装Flash播放器</a>';break}aa+='<br>您也可以使用其他播放器下载观看此视频，地址:<a href="'+I(x)+'">'+I(x)+"</a>";F.innerHTML=aa};var O=function(ac,al,ag,aa,ai,ad,an){var Z={width:al,height:ag,id:ac};k(Z,an);var ak={allowfullscreen:"true",allowscriptaccess:"always",menu:"false",quality:"high",scaleMode:"showAll"};k(ak,ad);var ae="";if(ai&&typeof ai==="string"){ae=ai}else{if(ai&&typeof ai==="object"){var af=[];for(var am in ai){af.push(am+"="+encodeURIComponent(ai[am]))}ae=af.join("&")}}if(ae){ak.flashvars=ae}var ah="<object ";ah+=ciic_ua.ie?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ':'type="application/x-shockwave-flash" data="'+aa+'" ';for(var aj in Z){ah+=aj+'="'+Z[aj]+'" '}ah+=ciic_ua.ie?'><param name="movie" value="'+aa+'" />':">";for(var ab in ak){ah+='<param name="'+ab+'" value="'+ak[ab]+'" />'}ah+="</object>";return ah},L=function(ae,Z,ab,ad,ac){var aa='<object id="'+ae+'"'+(ciic_ua.ie?'classid="clsid:6bf52a52-394a-11d3-b153-00c04f79faa6"':'type="application/x-ms-wmp"')+' width="'+Z+'" height="'+ab+'"><param name="allowScriptAccess" value="always"><param name="url" value="'+ad+'"><param name="balance" value="0"><param name="enableContextMenu" value="false"><param name="enableErrorDialogs" value="false"><param name="src" value="'+ad+'"><param name="AutoSize" value="false"><param name="StretchToFit" value="1">'+(ac?"":'<param name="uiMode" value="none">')+'<param name="AutoStart" value="'+ac+'"></object>\n';return aa},t=function(){if(!ciic_ua.wmp.installed){expressInstall("wmv");return}var ad="flash_wmp";var aa="wmpPlayer";var ac;if(!ciic_ua.flash.installed){D=65;ac=(g.innerBar?c:(c+D));F.innerHTML=L(aa,a,ac,x,true);E=B(aa);E.seeek=function(ae){this.controls.currentPosition=parseInt(ae)};var ab=function(ae){if(ae==8){U()}};if(ciic_ua.ie){E.attachEvent("PlayStateChange",ab)}else{E.addEventListener("PlayStateChange",ab,false);window.OnDSPlayStateChangeEvt=ab}}else{D=35;ac=(g.innerBar?(c-D):c);var Z={wmpid:aa,url:x,isWmv:true,adMode:u.ad,autoPlay:g.autoplay};F.innerHTML=L(aa,a,ac,x,false)+O(ad,a,D,g.player,Z,null,null);ac+=D;E=B(ad);E.seeek=function(ae){this.setVideo(ae)}}F.style.height=""+ac+"px";if(E){h()}},I=function(Z){return Z.replace(/mms:\/\/(wmv5|wmv).china.com.cn\/(VOD|dianbo)\//,"http://$1dl.china.com.cn/")},z=function(Z){return Z.replace(/rtmp:\/\/flv.china.com.cn\/(live[^\/]*)\/.*/i,"http://mac.china.com.cn/live/$1.m3u8")},A=function(){if(html5video&&(ciic_ua.iphone||ciic_ua.ipad||ciic_ua.android)){return K()}if(!ciic_ua.flash.installed){expressInstall();return}var ab="flash_player";D=35;var aa=F.style.height=""+(g.innerBar?c:(c+D))+"px";var Z={url:x,adMode:u.ad,autoPlay:g.autoplay,innerBar:g.innerBar,scaleMode:g.scaleMode};F.innerHTML=O(ab,a,aa,g.player,Z,null,null);E=B(ab);if(E){E.seeek=function(ac){this.setVideo(ac)};h()}},K=function(){var aa="video-player-html5";var Z=F.style.height=""+c+"px";F.innerHTML='<video id="'+aa+'" preload="none" '+(g.autoplay?'autoplay="autoplay"':'')+' controls="controls" width="'+a+'" height="'+c+'"><source src="'+((ciic_ua.iphone||ciic_ua.ipad)?z(x):x)+'" type="video/mp4" />浏览器不支持本视频，您可以选择使用其他终端观看。</video>';E=B(aa);if(E){E.seeek=function(ab){this.currentTime=ab};E.onended=function(){U()};h()}},l=function(){if(ciic_ua.flash.installed){var Z={id:"player",name:"player"};F.innerHTML=O(F.id,604,382,x,null,null,Z)}else{expressInstall()}},h=function(){var ab,Z=R(document,g.marker);for(var aa=0;aa<Z.length;aa++){if(!Z[aa].getAttribute("pos")){continue}ab=parseInt(Z[aa].getAttribute("pos"));V.push({time:ab,element:Z[aa]});Z[aa].onclick=function(){v(this.getAttribute("pos"))}}},P=function(){var aa=s;for(var Z=0;Z<aa.length;Z++){if(!aa[Z].element.getAttribute("src")){continue}aa[Z].element.setAttribute("seq",""+aa[Z].seq);aa[Z].element.onclick=function(){i(this.getAttribute("seq"))}}},H=function(){var aa=s;for(var Z=0;Z<aa.length;Z++){if(!aa[Z].element.getAttribute("src")){continue}delete aa[Z].element.onclick}},m=function(ab){var ad,ac;if(!ab){ab=B(g.playlist)}if(ab){s.length=0;var Z=R(ab,g.videofile);for(var aa=0;aa<Z.length;aa++){ac=X(Z[aa]);if(ac){s.push(ac);if(ad){ad.np=ac}ad=ac}}}else{ac=X(B(g.videofile));if(ac){s.push(ac)}}P();return s.length},d=function(Z){if(/\.mp4/i.test(Z)){return"mp4"}else{if(/\.f4v|\.flv|^rtmp.?:/i.test(Z)){return"flash"}else{if(/\.wmv|mms:/i.test(Z)){return"wmv"}else{if(/quacor.*swf/i.test(Z)){return"quacor"}else{if(/m3u8$/i.test(Z)){return"apple"}}}}}},j=function(Z){return(/^rtmp.?|^mms:/i.test(Z)&&!/\.wmv$|\.mp4$|\.flv$|\.f4v$/i.test(Z))},X=function(ac){var ae=ac,Z,ab,aa=false;if(typeof ac==="string"){ac=null}else{if(ae&&ae.getAttribute("src")!=""){if(ae.getAttribute("adMode")!=null){aa=true}ae=ae.getAttribute("src")}else{return}}ae=unescape(ae);Z=d(ae);switch(Z){case"wmv":ab=t;break;case"mp4":ab=(html5video&&!ciic_ua.FF&&!ciic_ua.android)?K:A;break;case"flash":ab=A;break;case"apple":ab=K;break;case"quacor":ab=l;break;default:ab=null}return{seq:s.length,element:ac,src:ae,media:Z,show:ab,ad:aa,np:null}},S=function(){if(n){return}F=B(g.target);if(F&&F.style){a=parseInt(F.style.width.replace(/px/gim,""));c=parseInt(F.style.height.replace(/px/gim,""));F.style.borderWidth="1px";F.style.borderStyle="solid";F.style.borderColor=g.borderColor}n=true;y(g.preload)},y=function(Z){if(!n){g.preload=Z;return}if(u&&u.ad){return}if(Z){var ab=X(Z);if(ab){ab.np=u;G(ab)}}else{if(g.autohide&&!Y){F.style.display="none"}var aa;if((aa=B("youku_api_show4partner"))||(aa=B("_UiPlayerW"))){B(g.extend).appendChild(aa);Y=true}else{m()}if(s.length>0){G(s[0])}}g.autoplay=true},G=function(Z){if(F&&Z){q=u;if(typeof q==C){q=b}F.style.display=g.display;F.innerHTML="";M=Z.media;x=Z.src;u=Z;Y=true;if(Z.show){Z.show();try{g.onChange(q.element,u.element)}catch(aa){}}}},U=function(){if(!u.np&&!w){w=true}else{if(u.np){G(u.np)}}if(w){try{g.onFinish(u.element)}catch(Z){}}},i=function(Z){if(u&&u.ad){return}if(Z==u.seq&&!w){return}w=false;G(s[Z])},v=function(Z){if(u&&u.ad){return}if(!f(Z)||!E){return}E.seeek(Z)},J=function(){var af=false;var ac=false;var ae=[];function Z(){if(!ac){ac=true;if(ae){for(var ag=0;ag<ae.length;ag++){ae[ag].call(window,[])}ae=[]}}}function aa(ag){var ah=window.onload;if(typeof window.onload!="function"){window.onload=ag}else{window.onload=function(){if(ah){ah()}ag()}}}function ab(){if(af){return}af=true;if(document.addEventListener&&!ciic_ua.opera){document.addEventListener("DOMContentLoaded",Z,false)}if(ciic_ua.ie&&window==top){(function(){if(ac){return}try{document.documentElement.doScroll("left")}catch(ah){setTimeout(arguments.callee,0);return}Z()})()}if(ciic_ua.opera){document.addEventListener("DOMContentLoaded",function(){if(ac){return}for(var ah=0;ah<document.styleSheets.length;ah++){if(document.styleSheets[ah].disabled){setTimeout(arguments.callee,0);return}}Z()},false)}if(ciic_ua.safari){var ag;(function(){if(ac){return}if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return}if(ag===C){var ah=document.getElementsByTagName("link");for(var ai=0;ai<ah.length;ai++){if(ah[ai].getAttribute("rel")=="stylesheet"){ag++}}var aj=document.getElementsByTagName("style");ag+=aj.length}if(document.styleSheets.length!=ag){setTimeout(arguments.callee,0);return}Z()})()}aa(Z)}var ad=function(ah,ag){ab();if(ac){ah.call(window,[])}else{ae.push(function(){return ah.call(window,[])})}};ab();return{add:ad}}();J.add(S);return{ciic_ua:ciic_ua,setting:g,version:T,$:B,$$:R,DOMReady:J,finish:U,play:y,playlist:m,set:function(Z){k(g,Z)},currentMarkerElement:function(){if(!E){return}var ab;try{if(E.currentPosition){ab=E.currentPosition()}else{if(E.currentTime){ab=parseInt(E.currentTime)}else{ab=E.controls.currentPosition}}}catch(aa){return}var Z=0;for(;Z<V.length;Z++){if(ab<V[Z].time){break}}return(Z>0)?V[Z-1].element:0},currentMediaElement:function(){return u.element}}})();